The process of converting JSON data to CSV starts with mapping the key-value pairs in the JSON to columns in the CSV. In this case, the keys `id`, `name`, `email`, and `roles` become the column headers. Each record in the JSON is then turned into a row, where the corresponding values are placed under each header. For example, the first JSON object has the values `1`, `Jan Kowalski`, `jan@example.com`, and a `roles` array containing `"admin"` and `"user"`. In the CSV, the `roles` array is represented as a string with the two roles joined by a semicolon (`;`), like this: `"admin;user"`.

One of the challenges with this conversion is how to handle arrays, like the `roles` field, because CSV doesnâ€™t have a direct way to represent multiple values under a single column. The simplest solution is to join the values in the array with a separator, such as a semicolon or a comma. In this case, a semicolon was used to avoid confusion with potential commas in the individual roles. If needed, this separator can be changed to something else to fit different use cases.

Overall, the conversion is straightforward, but handling arrays and choosing a clear separator can sometimes be tricky depending on the data.
